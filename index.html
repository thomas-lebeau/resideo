<!DOCTYPE html>
<body>
  <button id="authenticate">authenticate with resideo</button>
  <script>
    document.getElementById("authenticate").addEventListener("click", onClick);

    const apikey = window.location.search.split("apikey=")[1];
    const redirectUri = window.location.origin + window.location.pathname;
    const code = window.location.search.split("code=")[1];

    if (apikey) {
      document.body.appendChild(
        document.createTextNode(`✅ apikey: ${apikey}`)
      );
    } else {
      document.body.appendChild(document.createTextNode(`❌ missing apikey`));
    }

    if (code) {
      document.body.appendChild(document.createTextNode(`✅ code: ${code}`));
    }

    function onClick() {
      window.location.href = `https://api.honeywellhome.com/oauth2/authorize?response_type=code&client_id=${apikey}&redirect_uri=${redirectUri}`;
    }
  </script>
</body>
